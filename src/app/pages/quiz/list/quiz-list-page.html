<app-card>
    <div header>
        <app-toolbar>
            <div left>
                <h1 class="text-2xl font-bold mb-4">Quizzes</h1>
            </div>
            <div right>
                <button (click)="handleNew()">New</button>
            </div>
        </app-toolbar>
    </div>

    <div class="overflow-x-auto" content>
        <div class="grid grid-cols-1 gap-4 md:table md:w-full md:border-collapse md:border md:border-gray-300">
            <div class="hidden md:table-header-group bg-gray-100">
                <div class="md:table-row">
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-left">Title</div>
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-left">Description</div>
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-left">Time Limit</div>
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-left">Published</div>
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-left">Actions</div>
                </div>
            </div>
            @for(quiz of quizzes$(); track quiz.id) {
                <div class="md:table-row hover:bg-gray-50">
                    <div class="grid grid-cols-2 md:table-cell border border-gray-300 px-4 py-2">
                        <span class="font-bold md:hidden">Title:</span>
                        {{ quiz.title }}
                    </div>
                    <div class="grid grid-cols-2 md:table-cell border border-gray-300 px-4 py-2">
                        <span class="font-bold md:hidden">Description:</span>
                        {{ quiz.description }}
                    </div>
                    <div class="grid grid-cols-2 md:table-cell border border-gray-300 px-4 py-2">
                        <span class="font-bold md:hidden">Time Limit:</span>
                        {{ formatDuration(quiz.timeLimit) }}
                    </div>
                    <div class="grid grid-cols-2 md:table-cell border border-gray-300 px-4 py-2">
                        <span class="font-bold md:hidden">Published:</span>
                        {{ quiz.isPublished ? 'Yes' : 'No' }}
                    </div>
                    <div class="grid grid-cols-2 md:table-cell border border-gray-300 px-4 py-2">
                        <span class="font-bold md:hidden">Actions:</span>
                        <div class="flex flex-col md:flex-row items-end md:items-start space-y-2">
                            <button class="w-32 md:w-auto md:mr-4" (click)="handleEdit(quiz)">{{ quiz.isPublished ? 'View' : 'Edit' }}</button>
                            @if (!quiz.isPublished) {
                                <button class="w-32 md:w-auto md:mr-4" (click)="handlePublish(quiz)">Publish</button>
                            }
                            <button class="w-32 md:w-auto md:mr-4" (click)="handleDelete(quiz)">Delete</button>
                        </div>
                    </div>
                </div>
            } @empty {
                <div class="md:table-row">
                    <div class="md:table-cell border border-gray-300 px-4 py-2 text-center" colspan="5">There are no quizzes available.</div>
                </div>
            }
        </div>
    </div>
</app-card>
